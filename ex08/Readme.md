# Упражнение 8

[Упражнение 8 - слайдове](https://gitpitch.com/adUst0/os2018/master?p=ex08/slides/ "ex08")

---

## I. Условно изпълнение

 - `cmd1 && cmd2` - cmd2 се изпълнява, ако cmd1 завърши успешно
 - `cmd1 || cmd2` - cmd2 се изпълнява, ако cmd1 завърши неуспешно

## II. Работа със стрингове

 - `expr length <STRING>` - дължината на STRING 
 - `expr substr <STRING> <POS> <LENGTH>` - подстринг от STRING . Индексацията е от 1
 - `expr index <STRING> <CHARS>` - index in STRING where any CHARS is found, or 0

## III. Функции

### 1. Създаване на фунцкия

    function_name () {  
        списък_команди  
    }

    function function_name {  
        списък_команди  
    }

### 2. Извикване на функция

    # Create function
    say_hello() {
        echo Hello World!
    }

    # Function invocation
    say_hello # Output: Hello World!

### 3. Аргументи към функция

    say_hello() {
        echo Hello, $1!
    }

    # Pass argument to a function
    say_hello Student # Output: Hello, Student!

### 4. Return Values

- `return [N]` - прекратява изпълнението на функцията с код на завършване N (т.е. Bash ни позволява да връщаме само код на завършване)

Пример:

        say_hello() {
            echo Hello, $1!
            return 5
            echo "after return" # this line will not be executed
        }

### 5. Variable Scope

- По подразбиране всички променливи са **глобални**. 
- За да създадем локална променлива в дадена функция, използваме ключовата дума `local`

Пример:

    myfunc() {
        x=5
        local y=7
    }

    echo "<$x>" # Output: <>
    echo "<$y>" # Output: <>

    myfunc # creates global variable x

    echo "<$x>" # Output: <5>
    echo "<$y>" # Output: <>

## IV. Важни файлове

 - /etc/passwd - файл с информация за всички потребители
 - /dev/null - празен файл. Всичко, което пренасочим към него, изчезва. 
 - .bash_profile - КП с конфигурация за системата (изпълнява се при логическо включване)

## V. Задачи

1. Напишете функция getFilesCount, която приема като аргумент име на съществуваща директория и низ. Функцията отпечатва броят на обикновените файлове в директорията, чието име match-ва подадения низ. (Функцията не отпечатва нищо друго, дори и нов ред)
Пример: getFilesCount ~/ "*.cpp"

1. Напишете функция removeFileExtension, която получава като аргумент стринг във вида \<name\>.\<extension\> и отпечатва \<name\> (без нов ред)

1. (NAME_CUT) Да се състави командна процедура, която получава при стартиране в командния ред един параметър – име на съществуваща директория. За всеки C source файл от тази директория, процедурата стартира компилация във фонов режим, задавайки за име на получавания при успешна компилация изпълним файл основното име на текстовия файл и разширение exe.

1. (OUT_FILES) Да се състави командна процедура, която получава като параметри в командния ред при стартиране два символни низа – имена на съществуващи директории. Ако броят на файловете, чието име съдържа разширение “out”, в пьрвата директория, е по-голям от броя на същите във втората – процедурата създава поддиректория в текущата директория, извежда името й на стандартния изход и премества в нея всички обикновени файлове от първата директория, които са достъпни за четене и писане.

1. (TOT_CI) Да се състави командна процедура, която получава като параметри в командния ред при стартиране два символни низа – имена на съществуващи директории. В случай, че общият брой на файловете, съдържащи изходен текст (код) на С, в двете директории надвишава 20, процедурата създава в текущата директория файл, съдържащ имената им, който да е достъпен само за четене за всички потребители. В противен случай – извежда с подходящо съобщение този брой на стандартния изход.

1. (COPYREADABLE) Да се състави командна процедура, която получава в командния ред при стартиране един параметър – символен низ. Ако не съществува поддиректория на началната директория на потребителя, стартирал процедурата, с име, съвпадащо с подадения низ, процедурата я създава. Копира в тази директория всички обикновени файлове от текущата директория, които са достьпни за четене и извежда на стандартния изход броя на останалите.