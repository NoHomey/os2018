# Упражнение 7

---

## I. Условен оператор и проверка на условия

    true  # команда която винаги завършва успешно  
    false # команда която винаги завършва неуспешно  

---

### 1. Оператор if

    if списък_команди1  
    then списък_команди2  
    [elif списък_команди3  
    then списък_команди4] ...  
    [else списък_команди5]  
    fi  

---

- Условието се оценява на истина, ако последната команда в списъка завърши успешно. (Exit status 0).

Пример:

    if true; false; then echo Yes; else echo No; fi # No
    if false; true; then echo Yes; else echo No; fi # Yes

---

- **Exit status 0** означава true. Всичко останало е false.  
- **Кода на завършване на if-а** е кода на последната изпълнена команда от този if или 0, ако нито едно условие не е истина и няма else. 

---

*Задача*: КП, която приема като аргумент име на потребител и отпечатва съобщение, ако този потребител не съществува

    if grep "^$1:" /etc/passwd > /dev/null 2>&1; then
        :
    else
        echo "No user $1"
    fi

---

### 2. Команда test

    test условие  # или 
    [ условие ] 

@ul

- ! (логическо отрицание)  
- -a (логическо AND)  
- -o (логическо OR) 

@ulend 

---

#### Условия за файлове

@ul

- -e файл - истина, ако файл съществува 
- -f файл - истина, ако файл съществува и е обикновен файл 
- -d файл - истина, ако файл съществува и е директория 
- -s файл - истина, ако файл не е празен 

@ulend

---

#### Условия за файлове (продължение)

@ul

- -r файл - изпълняващият има read права 
- -w файл - изпълняващият има write права 
- -x файл - изпълняващият има execute права 
- файл1 -nt файл2 - файл1 е по-нов от файл2 (според последната промяна) 
- файл1 -оt файл2 - файл1 е по-стар от файл2 (според последната промяна) 

@ulend

---

#### Условия за стрингове

@ul

- `str1 {=|!=} str2`
- `[-n] str` - истина, ако str != ""
- `-z str` - истина, ако str = ""

@ulend

---

#### Условия за сравнения на числа

| Конструкция| Значение |
|--|--|
| n1 -eq n2 | n1 == n2 |
| n1 -ne n2 | n1 != n2 |
| n1 -lt n2 | n1 < n2 |
| n1 -le n2 | n1 <= n2 |
| n1 -gt n2 | n1 > n2 |
| n1 -ge n2 | n1 >= n2 |

---

### 3. Оператор [[ ]]

    [[ условие ]]

Подобрения: 

@ul

 - `||, &`
 - `str1 == str2`
 - `str1 {<|>} str2`

@ulend

---

## II. Цикли

---

### 1. Цикъл for

    for променлива [in списък]  
    do списък_команди  
    done  

---

### 2. Цикли while и until

    while списък_команди1  
    do списък_команди2  
    done   
  
    until списък_команди1  
    do списък_команди2  
    done  

---

### 3. break и continue

@ul

- `break [N]` - прекъсва цикъл  
- `continue [N]` - цикалът продължава със следващата итерация  

- **N** - на колко нива да се изпълни break или continue (в термините на вложени цикли). По подразбиране N = 1. 

@ulend

---

## III. Команда exit

@ul

- `exit [N]` - Приключва изпълнението на КП. Ако N е пропуснато, кодът на завършване е кодът на последната завършила команда. 

- **NB.** Ако нямаме exit в КП, кодът на завършване на КП е кодът на последната завършила команда.

@ulend

---

## Въпроси